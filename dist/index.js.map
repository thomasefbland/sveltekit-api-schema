{"version":3,"file":"index.js","sources":["../src/core/HTTP_CODES.js","../src/core/api_fetch.js"],"sourcesContent":["export const OK = 200;\nexport const CREATED = 201;\nexport const NO_CONTENT = 204;\n\nexport const SEE_OTHER = 303;\n\nexport const BAD_REQUEST = 400;\nexport const UNAUTHORIZED = 401;\nexport const FORBIDDEN = 403;\nexport const NOT_FOUND = 404;\n\nexport const SERVER_ERROR = 500;\n","/**\n * @typedef {Object} UnwrappedSuccessfulResponse\n * @property {true} ok\n * @property {Record<string, any>} json\n */\n\n/**\n * @typedef {Object} UnwrappedFailedResponse\n * @property {false} ok\n * @property {{ message: string }} json\n */\n\n/**\n * @typedef {UnwrappedSuccessfulResponse | UnwrappedFailedResponse} UnwrappedResponse\n */\n\n/**\n * @callback SvelteFetch\n * @param {RequestInfo | URL | string | globalThis.Request} input\n * @param {RequestInit} [init]\n * @returns {Promise<Response>}\n */\n\n/**\n * @typedef {'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH'} Method\n */\n\n// FIXME: This interface is pretty bad probably now that I think about itx\n/**\n * @template {Record<string, any>} Data\n * @param {string} route\n * @param {Method} method\n * @param {Record<string, any> | SvelteFetch} [payload_or_svelte_fetch]\n * @param {SvelteFetch} [svelte_fetch]\n * @returns {Promise<UnwrappedResponse & { json: Data }>}\n */\nasync function api_fetch(route, method, payload_or_svelte_fetch, svelte_fetch) {\n\tconst _fetch = svelte_fetch ?? (typeof payload_or_svelte_fetch !== \"function\" ? fetch : payload_or_svelte_fetch);\n\n\tconst payload = typeof payload_or_svelte_fetch === \"object\" && !Array.isArray(payload_or_svelte_fetch) ? payload_or_svelte_fetch : undefined;\n\n\treturn new Promise((resolve) => {\n\t\t_fetch(route, {\n\t\t\tmethod: method,\n\t\t\tbody: payload ? JSON.stringify(payload) : undefined,\n\t\t}).then((/** @type {Response} */ response) => response.json().then((json) => resolve({ ok: response.ok, json })));\n\t});\n}\n\nexport { api_fetch };\n"],"names":[],"mappings":"AAAY,MAAC,EAAE,GAAG;AACN,MAAC,OAAO,GAAG;AACX,MAAC,UAAU,GAAG;;AAEd,MAAC,SAAS,GAAG;;AAEb,MAAC,WAAW,GAAG;AACf,MAAC,YAAY,GAAG;AAChB,MAAC,SAAS,GAAG;AACb,MAAC,SAAS,GAAG;;AAEb,MAAC,YAAY,GAAG;;ACX5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,SAAS,CAAC,KAAK,EAAE,MAAM,EAAE,uBAAuB,EAAE,YAAY,EAAE;AAC/E,CAAC,MAAM,MAAM,GAAG,YAAY,KAAK,OAAO,uBAAuB,KAAK,UAAU,GAAG,KAAK,GAAG,uBAAuB,CAAC;;AAEjH,CAAC,MAAM,OAAO,GAAG,OAAO,uBAAuB,KAAK,QAAQ,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,uBAAuB,CAAC,GAAG,uBAAuB,GAAG,SAAS;;AAE7I,CAAC,OAAO,IAAI,OAAO,CAAC,CAAC,OAAO,KAAK;AACjC,EAAE,MAAM,CAAC,KAAK,EAAE;AAChB,GAAG,MAAM,EAAE,MAAM;AACjB,GAAG,IAAI,EAAE,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,SAAS;AACtD,GAAG,CAAC,CAAC,IAAI,CAAC,yBAAyB,QAAQ,KAAK,QAAQ,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,OAAO,CAAC,EAAE,EAAE,EAAE,QAAQ,CAAC,EAAE,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;AACnH,EAAE,CAAC;AACH;;;;"}